<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>æ˜“ç­æ ¡æœ¬åŒ–æ™šç‚¹ç­¾åˆ°</title>
      <link href="/2024/04/17/%E6%98%93%E7%8F%AD%E6%A0%A1%E6%9C%AC%E5%8C%96%E6%99%9A%E7%82%B9%E7%AD%BE%E5%88%B0/"/>
      <url>/2024/04/17/%E6%98%93%E7%8F%AD%E6%A0%A1%E6%9C%AC%E5%8C%96%E6%99%9A%E7%82%B9%E7%AD%BE%E5%88%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å†™ç¯‡æ–‡ç« æ•™æ•™ä¸æ‡‚çš„ç¾¤uä»¬æ€ä¹ˆå®ç°è‡ªåŠ¨æ™šç‚¹ç­¾åˆ°ã€‚</p><p>è¦å‡†å¤‡çš„ä¸œè¥¿ï¼š</p><ul><li>ä¸€å°ç”µè„‘ï¼ˆä»¥Windows11ç³»ç»Ÿä¸ºä¾‹ï¼‰</li><li>ç”µè„‘ä¸Šå®‰è£…äº†Pythonå’ŒGitï¼ˆå¦‚æœä½ ä¸æ‡‚å¦‚ä½•å®‰è£…çš„è¯ï¼Œè¯·çœ‹æœ¬æ–‡çš„â€œå‚è€ƒèµ„æ–™â€ï¼‰</li><li>èƒ½é¡ºç•…è®¿é—®Githubçš„ç½‘ç»œç¯å¢ƒ</li><li>ä¸€é¢—ä¼šç™¾åº¦çš„è„‘å­</li></ul><h1 id="æ“ä½œæµç¨‹"><a href="#æ“ä½œæµç¨‹" class="headerlink" title="æ“ä½œæµç¨‹"></a>æ“ä½œæµç¨‹</h1><ol><li><p>ç‚¹å‡»ä»»åŠ¡æ ä¸­windowsçš„å¾½æ ‡ï¼Œæœç´¢â€œcmdâ€ï¼Œç„¶åæ‰“å¼€â€œå‘½ä»¤æç¤ºç¬¦â€ï¼Œè¿™æ—¶ä¼šæœ‰ä¸€ä¸ªé»‘è‰²æ¡†æ¡†å¼¹å‡ºæ¥ã€‚</p></li><li><p>å¤åˆ¶ä¸‹é¢è¿™æ®µå‘½ä»¤ï¼ŒæŒ‰<strong>é¼ æ ‡å³é”®</strong>ç²˜è´´åˆ°é»‘è‰²æ¡†æ¡†ä¸­ï¼Œå¹¶ç‚¹å‡»<strong>å›è½¦é”®</strong>ã€‚</p><p><code>pip install --upgrade git+https://github.com/Qs315490/fyiban</code></p><p>å¦‚æœå®‰è£…æˆåŠŸï¼Œé»‘æ¡†æ¡†ä¸­ä¼šæç¤º<code>Successfully installed fyiban-1.0.8</code>ã€‚å¦‚æœå®‰è£…å¤±è´¥ï¼Œè¯·æ£€æŸ¥ä½ çš„ç½‘ç»œå¹¶é‡è¯•ã€‚</p></li><li><p>éšååœ¨ä¸€ä¸ª<strong>ä½ èƒ½è®°å¾—ä½</strong>çš„åœ°æ–¹ï¼ˆè·¯å¾„ä¸­ä¸è¦æœ‰ä¸­æ–‡ï¼‰ï¼Œæ–°å»ºä¸€ä¸ªåä¸º<code>YibanScript</code>çš„<strong>æ–‡æœ¬æ–‡ä»¶</strong>ã€‚</p></li><li><p>æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œå¤åˆ¶ä»¥ä¸‹å†…å®¹ï¼Œç²˜è´´è¿›å»å¹¶ä¿å­˜ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> yiban <span class="keyword">import</span> Yiban</span><br><span class="line"></span><br><span class="line">SIGN_DATA=<span class="string">&#x27;&#123;&quot;Reason&quot;:&quot;&quot;,&quot;AttachmentFileName&quot;:&quot;&quot;,&quot;LngLat&quot;:&quot;118.59,24.56&quot;,&quot;Address&quot;:&quot;ç¦å»ºçœæ³‰å·å¸‚æ™‹æ±Ÿå¸‚ç¦å·å¤§å­¦æ™‹æ±Ÿæ ¡åŒº&quot;&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line">yb = Yiban(<span class="string">&quot;è´¦å·&quot;</span>,<span class="string">&quot;å¯†ç &quot;</span>)</span><br><span class="line">result = yb.submit_sign_feedback(SIGN_DATA)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å…¶ä¸­â€œè´¦å·â€â€œå¯†ç â€æ”¹æˆä½ è‡ªå·±çš„æ˜“ç­è´¦å·å¯†ç ï¼Œæ³¨æ„åªä¿®æ”¹å¼•å·å†…çš„å†…å®¹ã€‚</p></li><li><p>å…³é—­ç¼–è¾‘å™¨ï¼Œå°†è¿™ä¸ªæ–‡ä»¶çš„åç¼€åç”±<code>.txt</code>æ”¹ä¸º<code>.py</code>ã€‚ï¼ˆä½ æˆ–è®¸çœ‹ä¸åˆ°åç¼€åï¼Œè¯·è‡ªè¡Œæœç´¢å¦‚ä½•æ›´æ”¹åç¼€åï¼‰</p></li><li><p>åœ¨<code>YibanScript</code>æ‰€åœ¨çš„æ–‡ä»¶å¤¹ä¸­ç‚¹å‡»é¼ æ ‡å³é”®ï¼Œåœ¨èœå•ä¸­é€‰æ‹©â€œåœ¨ç»ˆç«¯ä¸­æ‰“å¼€â€ã€‚</p></li><li><p>åœ¨ç»ˆç«¯ä¸­è¾“å…¥<code>python YibanScript.py</code>ï¼Œå¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œç»ˆç«¯ä¼šæç¤ºâ€œç­¾åˆ°æˆåŠŸâ€ã€‚</p></li></ol><h1 id="è‡ªåŠ¨åŒ–æ“ä½œ"><a href="#è‡ªåŠ¨åŒ–æ“ä½œ" class="headerlink" title="è‡ªåŠ¨åŒ–æ“ä½œ"></a>è‡ªåŠ¨åŒ–æ“ä½œ</h1><p>ä¸Šé¢æˆ‘ä»¬å·²ç»çŸ¥é“äº†å¦‚ä½•æ‰‹åŠ¨è¿›è¡Œæ‰“å¡ï¼Œæ¥ä¸‹æ¥å®ç°è‡ªåŠ¨åŒ–æ‰“å¡ã€‚</p><p>é¦–å…ˆæŒ‰Winé”®+Ré”®æ‰“å¼€â€œè¿è¡Œâ€ï¼Œåœ¨å…¶ä¸­è¾“å…¥<code> compmgmt.msc</code>å¹¶ç‚¹å‡»å›è½¦é”®ã€‚</p><p><img src="https://telegraph-image-6ky.pages.dev/file/e4cdd9ad8188b3db49a77.png"></p><p><img src="https://telegraph-image-6ky.pages.dev/file/7090f00a9db3be6b01b2d.png"></p><p><img src="https://telegraph-image-6ky.pages.dev/file/0dd4bd4d1168c7c016e25.png"></p><p><img src="https://telegraph-image-6ky.pages.dev/file/4a8a64b811d06916b43e6.png"></p><p><img src="https://telegraph-image-6ky.pages.dev/file/f79c09a3ede26c4b0fb29.png"></p><p><img src="https://telegraph-image-6ky.pages.dev/file/1be021d6bb1368f07bc8b.png"></p><p>å¤§åŠŸå‘Šæˆï¼Œç°åœ¨ç”µè„‘ä¼šåœ¨æŒ‡å®šæ—¶æ®µè‡ªåŠ¨è¿è¡ŒYibanScript.pyï¼Œå®ç°è‡ªåŠ¨æ‰“å¡äº†ã€‚ä¸è¿‡æˆ‘ä¾ç„¶å»ºè®®ä½ å¤´å‡ å¤©åœ¨è‡ªåŠ¨æ‰“å¡è¿‡åå†çœ‹ä¸€ä¸‹æ‰“å¡æ˜¯å¦æˆåŠŸã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ çš„ç”µè„‘åœ¨æŒ‡å®šæ—¶é—´å¿…é¡»æ˜¯å¤„åœ¨è¿è¡ŒçŠ¶æ€çš„ã€‚</p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1016959856222624">å®‰è£…Python -å»–é›ªå³°</a></p><p><a href="https://git-scm.com/downloads">Gitå®˜ç½‘</a></p><p><a href="https://github.com/Qs315490/fyiban">æºç </a></p>]]></content>
      
      
      
        <tags>
            
            <tag> è½¯ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹æœºè‡ªåŠ¨åŒ–æ“ä½œï¼šScrpyã€Pyautoguiä¸Pytesseract</title>
      <link href="/2024/01/08/%E6%89%8B%E6%9C%BA%E8%87%AA%E5%8A%A8%E5%8C%96%E6%93%8D%E4%BD%9C%EF%BC%9AScrpy%E3%80%81Pyautogui%E4%B8%8EPytesseract/"/>
      <url>/2024/01/08/%E6%89%8B%E6%9C%BA%E8%87%AA%E5%8A%A8%E5%8C%96%E6%93%8D%E4%BD%9C%EF%BC%9AScrpy%E3%80%81Pyautogui%E4%B8%8EPytesseract/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å¸¸å¸¸éœ€è¦åœ¨æ‰‹æœºä¸Šè¿›è¡Œä¸€äº›è‡ªåŠ¨åŒ–æ“ä½œï¼Œç„¶è€Œåœ¨æ‰‹æœºä¸Šè¿è¡Œçš„è„šæœ¬è¿œè¿œä¸å¦‚èƒ½åœ¨ç”µè„‘ä¸Šè¿è¡Œçš„è„šæœ¬å¼ºå¤§ã€‚æˆ‘ä»¬å¯ä»¥å€ŸåŠ©Scrpyå°†æ‰‹æœºç”»é¢æŠ•å°„åˆ°ç”µè„‘ä¸Šï¼Œå†åœ¨ç”µè„‘ä¸Šè¿è¡Œè„šæœ¬æ¥è‡ªåŠ¨åŒ–æ“ä½œæ‰‹æœºã€‚</p><h1 id="Scrpyçš„ä½¿ç”¨"><a href="#Scrpyçš„ä½¿ç”¨" class="headerlink" title="Scrpyçš„ä½¿ç”¨"></a>Scrpyçš„ä½¿ç”¨</h1><blockquote><p>This application mirrors Android devices (video and audio) connected via USB orÂ <a href="https://github.com/Genymobile/scrcpy/blob/master/doc/connection.md#tcpip-wireless">over TCP&#x2F;IP</a>, and allows to control the device with the keyboard and the mouse of the computer. It does not require anyÂ <em>root</em>Â access. It works onÂ <em>Linux</em>,Â <em>Windows</em>Â andÂ <em>macOS</em>.</p></blockquote><p>ä»<a href="https://github.com/Genymobile/scrcpy">è¿™é‡Œ</a>ä¸‹è½½scrpyï¼Œè§£å‹åˆ°ä½ èƒ½è®°ä½çš„ä½ç½®ï¼ŒéšåæŠŠscrpyçš„ä¸»ç›®å½•è·¯å¾„æ·»åŠ è‡³ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦<a href="https://github.com/Tomotoes/scrcpy-gui">scrcpy-gui</a>ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸ºscrpyå¼€å‘çš„ä¸­æ–‡guiç¨‹åºã€‚</p><p>ä»¥ç®¡ç†å‘˜æ¨¡å¼è¿è¡Œ<code>ScrcpyGui.exe</code>ï¼Œç„¶åä½¿ç”¨æ•°æ®çº¿è¿æ¥æ‰‹æœºå’Œç”µè„‘ã€‚åœ¨å‡ºç°çš„åˆ—è¡¨ä¸­å‹¾é€‰ä½ çš„è®¾å¤‡ï¼Œå¹¶ç‚¹å‡»:<code>æ‰“å¼€é•œåƒ</code>ã€‚</p><p>å¦‚æœè¿æ¥å¤±è´¥ï¼š</p><ul><li><p>ç¡®è®¤æ‰‹æœºçš„usbè°ƒè¯•åŠŸèƒ½æ˜¯å¦æ‰“å¼€</p></li><li><p>ç¡®è®¤æ‰‹æœºusbæ˜¯å¦å…è®¸ä¼ è¾“å¤šåª’ä½“ï¼ˆæ–‡ä»¶ï¼‰</p></li><li><p>å°è¯•é‡å¯ç”µè„‘ï¼Œä»¥åŠé‡æ–°è¿æ¥æ•°æ®çº¿</p></li></ul><p>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œç”µè„‘ä¸Šå°±ä¼šå¼¹å‡ºçª—å£æ˜¾ç¤ºæ‰‹æœºçš„ç”»é¢ï¼Œä½ å¯ä»¥ç”¨é¼ æ ‡æ“ä½œå®ƒã€‚</p><p>scrpyè¿˜æœ‰è®¸å¤šå¯é…ç½®çš„é€‰é¡¹ï¼š</p><p><img src="https://telegraph-image-6ky.pages.dev/file/16219f71fbdef6a8e3749.png" alt="scrpyçš„é…ç½®"></p><h1 id="PyAutoGUIçš„ä½¿ç”¨"><a href="#PyAutoGUIçš„ä½¿ç”¨" class="headerlink" title="PyAutoGUIçš„ä½¿ç”¨"></a>PyAutoGUIçš„ä½¿ç”¨</h1><blockquote><p>PyAutoGUI is a cross-platform GUI automation Python module for human beings. Used to programmatically control the mouse &amp; keyboard.</p></blockquote><p>Pyautoguièƒ½æ–¹ä¾¿åœ°å¸®æˆ‘ä»¬åšä¸€äº›è‡ªåŠ¨åŒ–æ“ä½œï¼Œæ¯”å¦‚æ¨¡æ‹Ÿé”®ç›˜ã€é¼ æ ‡è¾“å…¥ï¼Œæ•è·å±å¹•ç­‰ã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨pyautoguiçš„ç¨‹åºè¦ä»¥ç®¡ç†å‘˜æ¨¡å¼è¿è¡Œã€‚</p><p>é¦–å…ˆæ˜¯å®‰è£…ä¸å¯¼å…¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pyautogui</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyautogui</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„æ“ä½œï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">screenWidth, screenHeight = pyautogui.size() <span class="comment"># è·å–æ˜¾ç¤ºå™¨åˆ†è¾¨ç‡</span></span><br><span class="line">currentMouseX, currentMouseY = pyautogui.position() <span class="comment"># è·å–é¼ æ ‡å½“å‰ä½ç½®</span></span><br><span class="line"></span><br><span class="line">pyautogui.moveTo(<span class="number">50</span>, <span class="number">50</span>) <span class="comment"># å°†é¼ æ ‡ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®</span></span><br><span class="line">pyautogui.click() <span class="comment"># å•å‡»ä¸€æ¬¡é¼ æ ‡å·¦è„šã€‚è¯¥å‡½æ•°ä¸ºæœ‰å¤šä¸ªå¯é€‰çš„å‚æ•°å¦‚ï¼šç‚¹å‡»çš„ä½ç½®ã€æ¬¡æ•°ã€æŒ‰é”®ç­‰</span></span><br><span class="line">pyautogui.click(<span class="string">&#x27;button.png&#x27;</span>) <span class="comment"># ä»å±å¹•ä¸Šå¯»æ‰¾&#x27;button.png&#x27;å‡ºç°çš„åœ°æ–¹å¹¶ç‚¹å‡»å®ƒçš„ä¸­å¿ƒä½ç½®</span></span><br><span class="line"></span><br><span class="line">pyautogui.write(<span class="string">&#x27;Hello world!&#x27;</span>, interval=<span class="number">0.25</span>) <span class="comment"># ä»¥é—´éš”æ—¶é—´è¾“å…¥æ–‡å­—</span></span><br><span class="line">pyautogui.press(<span class="string">&#x27;esc&#x27;</span>)  <span class="comment"># æŒ‰æŒ‡å®šæŒ‰é”®ï¼Œæ‰€æœ‰æŒ‰é”®çš„åç§°å¯ä»¥åœ¨pyautogui.KEY_NAMESæ‰¾åˆ°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> pyautogui.hold(<span class="string">&#x27;shift&#x27;</span>): <span class="comment"># æŒ‰ä½æŸæŒ‰é”®çš„åŒæ—¶æ‰§è¡Œå…¶ä»–æ“ä½œ</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">pyautogui.hotkey(<span class="string">&#x27;ctrl&#x27;</span>, <span class="string">&#x27;c&#x27;</span>) <span class="comment"># æŒ‰ç»„åˆæŒ‰é”®</span></span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€äº›æ‹–æ‹½ã€å¼¹çª—ä¹‹ç±»çš„æ“ä½œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚</p><h1 id="Python-Tesseractçš„ä½¿ç”¨"><a href="#Python-Tesseractçš„ä½¿ç”¨" class="headerlink" title="Python Tesseractçš„ä½¿ç”¨"></a>Python Tesseractçš„ä½¿ç”¨</h1><blockquote><p>Python-tesseract is an optical character recognition (OCR) tool for python. That is, it will recognize and â€œreadâ€ the text embedded in images.</p><p>Python-tesseract is a wrapper forÂ <a href="https://github.com/tesseract-ocr/tesseract">Googleâ€™s Tesseract-OCR Engine</a>. It is also useful as a stand-alone invocation script to tesseract, as it can read all image types supported by the Pillow and Leptonica imaging libraries, including jpeg, png, gif, bmp, tiff, and others. Additionally, if used as a script, Python-tesseract will print the recognized text instead of writing it to a file.</p></blockquote><p>PytesseractåŸºäºTesseractï¼Œæ‰€ä»¥è¦å…ˆåœ¨ç”µè„‘ä¸Šå®‰è£…<a href="https://tesseract-ocr.github.io/tessdoc/Installation.html">Tesseract</a>ã€‚åœ¨å®‰è£…çš„æ—¶å€™æ³¨æ„é€‰æ‹©ä½ è¦ä½¿ç”¨çš„è¯­è¨€åŒ…ã€‚</p><p><img src="https://telegraph-image-6ky.pages.dev/file/2efa0d4b89e0794674a32.png"></p><p>ç„¶åæ˜¯Pytesseractçš„å®‰è£…å’Œå¯¼å…¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pytesseract</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pytesseract</span><br></pre></td></tr></table></figure><p>ç”¨Pytesseractèƒ½ç®€å•åœ°è¯†åˆ«å›¾åƒä¸­çš„æ–‡å­—ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pytesseract.pytesseract.tesseract_cmd = <span class="string">r&quot;your_path&quot;</span> <span class="comment"># é¦–å…ˆè¦è®¾ç½®tesseract.exeçš„è·¯å¾„</span></span><br><span class="line"></span><br><span class="line">screenshot = pyautogui.screenshot(region=(x, y, w, h)) <span class="comment"># ä½¿ç”¨pyautoguiæˆªå–å›¾åƒ</span></span><br><span class="line"><span class="built_in">print</span>(pytesseract.get_languages(config=<span class="string">&#x27;&#x27;</span>)) <span class="comment"># è·å–æ‰€æœ‰å¯ç”¨çš„è¯­è¨€</span></span><br><span class="line">text = pytesseract.image_to_string(screenshot, lang=<span class="string">&#x27;chi_sim&#x27;</span>) <span class="comment"># [lang]æ˜¯è¦ä½¿ç”¨çš„è¯­è¨€</span></span><br></pre></td></tr></table></figure><p>æ­¤å¤–ï¼ŒPytesseractè¿˜æœ‰å›¾åƒè½¬xmlã€pdfç­‰åŠŸèƒ½ã€‚å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚ </p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://github.com/Genymobile/scrcpy">Genymobile&#x2F;scrcpy: Display and control your Android device (github.com)</a></p><p><a href="https://github.com/Tomotoes/scrcpy-gui">Tomotoes&#x2F;scrcpy-gui: ğŸ‘» A simple &amp; beautiful GUI application for scrcpy.(github.com)</a></p><p><a href="https://pyautogui.readthedocs.io/en/latest/">Welcome to PyAutoGUIâ€™s documentation! â€” PyAutoGUI documentation</a></p><p><a href="https://github.com/madmaze/pytesseract">madmaze&#x2F;pytesseract: A Python wrapper for Google Tesseract (github.com)</a></p><p><a href="https://tesseract-ocr.github.io/tessdoc/Installation.html">Introduction | tessdoc (tesseract-ocr.github.io)</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> è½¯ä»¶ </tag>
            
            <tag> ç¼–ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonï¼šä¸€äº›æé«˜ä»£ç è´¨é‡çš„åŸºæœ¬ Type hinting</title>
      <link href="/2023/11/22/Python%EF%BC%9A%E4%B8%80%E4%BA%9B%E6%8F%90%E9%AB%98%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F%E7%9A%84%E5%9F%BA%E6%9C%AC-Type-hinting/"/>
      <url>/2023/11/22/Python%EF%BC%9A%E4%B8%80%E4%BA%9B%E6%8F%90%E9%AB%98%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F%E7%9A%84%E5%9F%BA%E6%9C%AC-Type-hinting/</url>
      
        <content type="html"><![CDATA[<p><em>æœ¬æ–‡è½¬è½½è‡ª<a href="https://www.less-bug.com/posts/python-type-hinting-basics/">Pythonï¼šä¸€äº›æé«˜ä»£ç è´¨é‡çš„åŸºæœ¬ Type hinting</a></em></p><p>æœ‰ä¸€å¤©ï¼Œç¨‹åºå‘˜ Alice æäº¤äº†ä»£ç ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä»–çš„ä»£ç å¥½ä¸å¥½ç»´æŠ¤ï¼Ÿ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_authors_names</span>(<span class="params">posts</span>):</span><br><span class="line">    authors_names = []</span><br><span class="line">    <span class="keyword">for</span> post <span class="keyword">in</span> posts:</span><br><span class="line">        author = post[<span class="string">&quot;author&quot;</span>]</span><br><span class="line">        author_name = author[<span class="string">&quot;name&quot;</span>]</span><br><span class="line">        authors_names.append(author_name)</span><br><span class="line">    <span class="keyword">return</span> authors_names</span><br></pre></td></tr></table></figure><p>åœ¨ 2023 å¹´ï¼Œç­”æ¡ˆæ˜¯ç¡®å®šçš„ï¼Œè¿™å°±æ˜¯ä¸€å¨å¤§ä¾¿ã€‚ç°åœ¨å·²ç»æœ‰äº†ç±»å‹æ ‡æ³¨ç‰¹æ€§ï¼Œå¦‚æœä¸æ˜¯ä¸ºäº†å…¼å®¹æ€§è€ƒè™‘ï¼Œä¸å†™ç±»å‹çš„è¡Œä¸ºæ¯”ä¸å†™æ³¨é‡Šæ›´åŠ æ¶åŠ£ï¼</p><p>å‘³é“æŒ‡æ•°ï¼šâ˜…â˜…ï¼ˆé‰´å®šä¸ºï¼šè‡­å‘³ï¼‰</p><p>é¦–å…ˆï¼Œposts å±äº Any æ•°æ®ç±»å‹ï¼Œä½†æ˜¯ä»£ç é‡Œå¼ºå‡è®¾äº†å®ƒæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œä¸”åˆ—è¡¨å…ƒç´ æ¯ä¸ªéƒ½å…·æœ‰ author å­—æ®µï¼Œæ¯ä¸ª author å­—æ®µçš„å€¼éƒ½æœ‰ name å­—æ®µã€‚è¿™ç§å‡è®¾æ²¡æœ‰ä»»ä½•ä¸œè¥¿æ¥ä¿è¯ã€‚å¯¼è‡´æ‹‰å±ä¸€æ—¶çˆ½ï¼Œç»´æŠ¤ç«è‘¬åœºã€‚</p><p>æ‰“å›å»é‡å†™ï¼</p><p>äº”åˆ†é’Ÿä¹‹åï¼ŒAlice ç»™å‡ºäº†æ–°çš„ä»£ç ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_authors_names</span>(<span class="params">posts</span>):</span><br><span class="line">    authors_names = []</span><br><span class="line">    <span class="keyword">for</span> post <span class="keyword">in</span> posts:</span><br><span class="line">        author = post.get(<span class="string">&quot;author&quot;</span>)  <span class="comment"># ä½¿ç”¨å­—å…¸çš„getæ–¹æ³•è·å–å€¼ï¼Œå¦‚æœé”®ä¸å­˜åœ¨åˆ™è¿”å›None</span></span><br><span class="line">        <span class="keyword">if</span> author <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            author_name = author.get(<span class="string">&quot;name&quot;</span>)  <span class="comment"># ä½¿ç”¨å­—å…¸çš„getæ–¹æ³•è·å–å€¼ï¼Œå¦‚æœé”®ä¸å­˜åœ¨åˆ™è¿”å›None</span></span><br><span class="line">            <span class="keyword">if</span> author_name <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                authors_names.append(author_name)</span><br><span class="line">    <span class="keyword">return</span> authors_names</span><br></pre></td></tr></table></figure><p>Alice æƒ³ï¼šå“ˆå“ˆï¼Œæˆ‘æ£€æŸ¥äº†ç©ºå€¼ï¼Œè¿™æ ·ä»£ç è´¨é‡å¤§å¤§æé«˜ï¼</p><p>æ°æ°ç›¸åï¼Œè¿™ç§ä»£ç æ˜¯çœŸæ­£çš„å±å±±ã€‚</p><p>å‘³é“æŒ‡æ•°ï¼šä¸‰é¢—æ˜Ÿï¼ˆé‰´å®šä¸ºï¼šå¼ºçƒˆçš„è‡­å‘³ï¼‰</p><p>è¿™æ˜¯æˆ‘å·¥ä½œä¸­é‡åˆ°åŒäº‹æœ€å–œæ¬¢å†™çš„ä»£ç ã€‚è¿™äº›åŒäº‹å–œæ¬¢åœ¨ä»£ç çš„å·¦è¾¹ç”»ä¸‰è§’å½¢ï¼Œä¸‰è§’å½¢è¶Šå¤§ï¼Œç¼©è¿›è¶Šå¤šï¼Œå°±è¶Šèƒ½ä¿ƒè¿›æ¸¸æ ‡å¡å°ºçš„é”€é‡ï¼Œå¸®åŠ©æˆ‘å›½èµ°å‡ºç»æµå±æœºã€‚</p><p>Aliceï¼Œä½ ä¸ç”¨å†™äº†ï¼Œè¿˜æ˜¯æˆ‘æ¥ï¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span>, TypedDict</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Author</span>(<span class="title class_ inherited__">TypedDict</span>):</span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    email: <span class="built_in">str</span></span><br><span class="line">    bio: <span class="built_in">str</span></span><br><span class="line">    website: <span class="built_in">str</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Post</span>(<span class="title class_ inherited__">TypedDict</span>):</span><br><span class="line">    title: <span class="built_in">str</span></span><br><span class="line">    author: Author</span><br><span class="line">    publication_date: <span class="built_in">str</span></span><br><span class="line">    content: <span class="built_in">str</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_authors_names</span>(<span class="params">posts: <span class="type">List</span>[Post]</span>) -&gt; <span class="type">List</span>[<span class="built_in">str</span>]:</span><br><span class="line">    <span class="keyword">return</span> [post[<span class="string">&quot;author&quot;</span>][<span class="string">&quot;name&quot;</span>] <span class="keyword">for</span> post <span class="keyword">in</span> posts]</span><br></pre></td></tr></table></figure><p>å‘³é“æŒ‡æ•°ï¼š?ï¼ˆè¯·ç½‘å‹è‡ªè¡Œé‰´å®šï¼‰</p><p>è¿™é‡Œæˆ‘ä»¬åˆ©ç”¨äº† Python çš„ typing ç‰¹æ€§ï¼Œä¸ºå‚æ•°æ ‡è®°äº†ç±»å‹ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ç¼–è¯‘æ—¶æœŸå‘ç°é”™è¯¯ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶æœŸã€‚</p><p>ä¹‹åå¦‚æœè¦æ–°å¢åŠŸèƒ½ï¼Œç”¨åˆ°äº†æ–°çš„å­—æ®µï¼Œä¹Ÿå¯ä»¥ç›´æ¥åˆ©ç”¨ç±»å‹æç¤ºç¼–ç ï¼Œä¸ç”¨ä½ é‡æ–°å¤ç°å‡ºæ•°æ®çš„æ¥æºï¼Œç„¶åæ‰“å°å‡ºæ¥ä¸€ä¸ªä¸ªçœ‹ã€‚</p><p>ä¸ºäº†å‘Šè¯‰å¤§å®¶æœ‰å¤šé¦™ï¼Œæˆ‘ç®€å•æ¼”ç¤ºä¸€ä¸‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_total_content_length</span>(<span class="params">posts: <span class="type">List</span>[Post]</span>):</span><br><span class="line">    total_length = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> post <span class="keyword">in</span> posts:</span><br><span class="line">        content = post[<span class="string">&quot;content&quot;</span>]</span><br><span class="line">        total_length += <span class="built_in">len</span>(content)</span><br><span class="line">    <span class="keyword">return</span> total_length</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬è¾“å…¥ <code>[</code> çš„æ—¶å€™ï¼Œç¼–è¾‘å™¨å°±ä¼šæç¤ºå¯ä»¥è¾“å…¥ä»€ä¹ˆã€‚</p><p>å‡è®¾æˆ‘ä¸å°å¿ƒæŠŠå­—æ®µåæ‰“é”™äº†ï¼šåˆ°ç¼–è¾‘å™¨ç›´æ¥å°±æŠ¥é”™äº†ã€‚è¿™ç§å°æ¯›ç—…å¦‚æœè¿è¡Œæ—¶æ‰å‘ç°ï¼Œè€Œä¸”æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒï¼Œé‚£å°±æ˜¯ç¾éš¾äº†ã€‚</p><h2 id="å¸¸è§çš„-typing"><a href="#å¸¸è§çš„-typing" class="headerlink" title="å¸¸è§çš„ typing"></a>å¸¸è§çš„ typing</h2><p>ä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹ Python çš„å¸¸ç”¨çš„ typingã€‚ä»‹ç»å®Œä¹‹åæˆ‘ä»¬ç»§ç»­æ”»å ä¸‹ä¸€ä¸ªå±å±±ï¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> typing <span class="keyword">as</span> t</span><br><span class="line"><span class="comment"># å­—ç¬¦ä¸²</span></span><br><span class="line">greet: <span class="built_in">str</span> = <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="comment"># æµ®ç‚¹æ•°</span></span><br><span class="line">radius: <span class="built_in">float</span> = <span class="number">0.1</span></span><br><span class="line"><span class="comment"># æ•´æ•°</span></span><br><span class="line">num_children: <span class="built_in">int</span> = <span class="number">10</span></span><br><span class="line"><span class="comment"># å¸ƒå°”å€¼</span></span><br><span class="line">is_cool: <span class="built_in">bool</span> = <span class="literal">True</span></span><br><span class="line"><span class="comment"># å­—èŠ‚ä¸²</span></span><br><span class="line">data: <span class="built_in">bytes</span> = <span class="string">b&quot;hello&quot;</span></span><br><span class="line"><span class="comment"># åˆ—è¡¨</span></span><br><span class="line">numbers: <span class="built_in">list</span>[<span class="built_in">int</span>] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="comment"># å…ƒç»„</span></span><br><span class="line">coordinates: <span class="built_in">tuple</span>[<span class="built_in">float</span>, <span class="built_in">float</span>] = (<span class="number">3.5</span>, <span class="number">2.7</span>)</span><br><span class="line"><span class="comment"># å­—å…¸</span></span><br><span class="line">person: <span class="built_in">dict</span>[<span class="built_in">str</span>, t.<span class="type">Union</span>[<span class="built_in">str</span>, <span class="built_in">int</span>]] = &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Alice&quot;</span>,</span><br><span class="line">    <span class="string">&quot;age&quot;</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="string">&quot;city&quot;</span>: <span class="string">&quot;New York&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># é›†åˆ</span></span><br><span class="line">fruits: <span class="built_in">set</span>[<span class="built_in">str</span>] = &#123;<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;orange&quot;</span>&#125;</span><br><span class="line"><span class="comment"># è‡ªå®šä¹‰ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, x: <span class="built_in">float</span>, y: <span class="built_in">float</span></span>):</span><br><span class="line">        self.x = x</span><br><span class="line">        self.y = y</span><br><span class="line"><span class="comment"># ä½¿ç”¨è‡ªå®šä¹‰ç±»å‹</span></span><br><span class="line">p1: Point = Point(<span class="number">2.0</span>, <span class="number">3.5</span>)</span><br><span class="line">p2: Point = Point(<span class="number">1.0</span>, -<span class="number">4.5</span>)</span><br><span class="line"><span class="comment"># å‡½æ•°ç±»å‹æ³¨è§£</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">x: <span class="built_in">int</span>, y: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line"><span class="comment"># ä½¿ç”¨å‡½æ•°ç±»å‹æ³¨è§£</span></span><br><span class="line">result: <span class="built_in">int</span> = add(<span class="number">5</span>, <span class="number">10</span>)</span><br><span class="line"><span class="comment"># ç±»å‹åˆ«å</span></span><br><span class="line">Vector = t.<span class="type">Tuple</span>[<span class="built_in">float</span>, <span class="built_in">float</span>]</span><br><span class="line"><span class="comment"># ä½¿ç”¨ç±»å‹åˆ«å</span></span><br><span class="line">vector: Vector = (<span class="number">2.5</span>, <span class="number">1.8</span>)</span><br><span class="line"><span class="comment"># å¯é€‰ç±»å‹</span></span><br><span class="line">name: t.<span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span></span><br><span class="line"><span class="comment"># é»˜è®¤å‚æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">greet_person</span>(<span class="params">name: <span class="built_in">str</span> = <span class="string">&quot;John&quot;</span></span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Hello, <span class="subst">&#123;name&#125;</span>!&quot;</span>)</span><br><span class="line"><span class="comment"># ä½¿ç”¨é»˜è®¤å‚æ•°</span></span><br><span class="line">greet_person()  <span class="comment"># è¾“å‡º: Hello, John!</span></span><br><span class="line">greet_person(<span class="string">&quot;Alice&quot;</span>)  <span class="comment"># è¾“å‡º: Hello, Alice!</span></span><br></pre></td></tr></table></figure><h2 id="å±å±±é‡æ„ä¹‹ç®€å•å·¥å‚"><a href="#å±å±±é‡æ„ä¹‹ç®€å•å·¥å‚" class="headerlink" title="å±å±±é‡æ„ä¹‹ç®€å•å·¥å‚"></a>å±å±±é‡æ„ä¹‹ç®€å•å·¥å‚</h2><p>å¥½ï¼Œç°åœ¨ Bob ç™»åœºï¼Œä»–å†™äº†ä¸€ä¸ª create_storage() å‡½æ•°ã€‚å®ç°äº†æ ¹æ® storage_type ç”Ÿæˆä¸åŒçš„ StorageClient å¯¹è±¡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">S3StorageClient</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">sync</span>(<span class="params">self, src, dest</span>):</span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AzureCloudStorageClient</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">sync</span>(<span class="params">self, src, dest</span>):</span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_storage</span>(<span class="params">storage_type: <span class="type">Literal</span>[<span class="string">&quot;s3&quot;</span>, <span class="string">&quot;azure&quot;</span>]</span>):</span><br><span class="line">    <span class="keyword">if</span> storage_type == <span class="string">&quot;s3&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> S3StorageClient()</span><br><span class="line">    <span class="keyword">elif</span> storage_type == <span class="string">&quot;azure&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> AzureCloudStorageClient()</span><br></pre></td></tr></table></figure><p>è¿˜æ˜¯é‚£å¥è¯ï¼Œåœ¨ Python3.5 ä¹‹å‰è¿™ä¹ˆå†™æ²¡é—®é¢˜ï¼Œä½†æ˜¯ç°åœ¨è¿™ä¹ˆå†™å°±æ˜¯ç»™è‡ªå·±æŒ–å‘ã€‚</p><p>æˆ‘ä»¬å…ˆä¸æ”¹ä»£ç ï¼Œå¤§å®¶çœ‹èƒ½åœ¨è¿™ä¸ªä»£ç æ‰¾åˆ°å‡ ä¸ªé—®é¢˜ï¼Ÿ</p><ol><li><p>sync å‡½æ•°ï¼Œèƒ½ç†è§£ src å’Œ dest ä»£è¡¨ä»€ä¹ˆå—ï¼Ÿæ˜¯ä»æœ¬åœ°çš„ src è·¯å¾„å¤åˆ¶åˆ°è¿œç¨‹çš„ dest è·¯å¾„å—ï¼Ÿè¿˜æ˜¯åè¿‡æ¥ï¼Ÿè¿˜æ˜¯ä¸¤è¾¹éƒ½æ˜¯è¿œç¨‹è·¯å¾„ï¼Ÿè¿˜æ˜¯è¯´éƒ½å¯ä»¥ï¼Ÿä¼ å…¥çš„æ˜¯ç›¸å¯¹è·¯å¾„è¿˜æ˜¯ç»å¯¹è·¯å¾„ï¼Ÿ</p></li><li><p>ä¸‡ä¸€å¢åŠ æ–°çš„ StorageClientï¼Œæ€ä¹ˆä¿è¯å®ç°è€…èƒ½å¤Ÿå®ç°æ‰€éœ€è¦çš„å‡½æ•°ï¼ˆsyncï¼‰</p></li><li><p>sync çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆç±»å‹ï¼Ÿ</p></li><li><p>æ¯æ¬¡ä½¿ç”¨è€…éƒ½éœ€è¦æ‰‹åŠ¨è¾“å…¥ storage_typeï¼Œä¸‡ä¸€è¾“é”™äº†æ€ä¹ˆåŠï¼Ÿé‚£å¤–é¢æ¯æ¬¡éƒ½éœ€è¦å¥—ä¸ª try catch?</p></li></ol><p>æˆ‘ä»¬ç°åœ¨ä¸€æ­¥æ­¥ä¿®æ”¹ã€‚ç¬¬ä¸€æ­¥æ˜¯å®šä¹‰ä¸€ä¸ªæŠ½è±¡åŸºç±»å«åš StorageClientï¼ŒæŠ½è±¡åŸºç±»çš„è¯ï¼Œç›¸å½“äºå…¶ä»–è¯­è¨€ä¸­çš„æ¥å£ï¼Œç”¨æ¥é™å®šå®ƒçš„å­ç±»å‹å¿…é¡»å®ç°å“ªäº›æ–¹æ³•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABCMeta, abstractmethod</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> ParseResult</span><br><span class="line"><span class="keyword">import</span> typing <span class="keyword">as</span> t</span><br><span class="line"></span><br><span class="line">URI = ParseResult</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StorageClient</span>(metaclass=ABCMeta):</span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">sync</span>(<span class="params">self, src: URI, dest: URI</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Sync files from a source URI to a destination URI.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            src: The source URI. </span></span><br><span class="line"><span class="string">                For example, s3://bucket/path/to/file or file://path/to/file.</span></span><br><span class="line"><span class="string">            dest: The destination URI. </span></span><br><span class="line"><span class="string">                For example, s3://bucket/path/to/file or file://path/to/file.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            None</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Raises:</span></span><br><span class="line"><span class="string">            ValueError: If the source or destination URI is invalid.</span></span><br><span class="line"><span class="string">            IOError: If the source or destination URI is not accessible.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NotImplemented</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬è¿˜å¢åŠ äº†æ³¨é‡Šï¼Œå‘Šè¯‰è°ƒç”¨è€…æ¯ä¸ªå‚æ•°çš„å«ä¹‰ã€‚å¹¶ä¸”æˆ‘ä»¬ç”¨ URI ä½œä¸ºå‚æ•°ç±»å‹ï¼Œè¿™æ ·ç”¨æˆ·å°±çŸ¥é“ï¼Œä¼ å…¥çš„ URI schema ä¸åŒï¼Œæ‰§è¡ŒåŒæ­¥çš„æ¥æºå’Œç›®æ ‡å°±ä¼šå¯¹åº”å˜åŒ–ã€‚</p><p>æ³¨é‡Šä¸­è¿˜å‘Šè¯‰ç”¨æˆ·ä»€ä¹ˆæƒ…å†µä¸‹è¿™ä¸ªå‡½æ•°ä¼šæŠ›å‡ºä»€ä¹ˆå¼‚å¸¸ã€‚è¿™æ ·è°ƒç”¨æ–¹å¯ä»¥ç²¾ç»†å¤„ç†å¼‚å¸¸ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å°è¯•å¢åŠ ä¸€ä¸ªæ–°çš„ StorageClientï¼Œæ¯”å¦‚ WebDavStorageClientï¼Œç„¶åæ•…æ„ä¸å®ç° syncï¼Œå¯ä»¥çœ‹åˆ°ç¼–è¾‘å™¨ç›´æ¥æŠ¥é”™äº†ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å†æ¥è§£å†³ create_storage å·¥å‚å‡½æ•°ã€‚è¿™é‡Œä½ å¯ä»¥é€‰æ‹©ç”¨ Literal æˆ–è€…æšä¸¾ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">create_storage</span>(<span class="params"></span></span><br><span class="line"><span class="params">    storage_type: t.<span class="type">Literal</span>[<span class="string">&quot;s3&quot;</span>, <span class="string">&quot;azure&quot;</span>]</span></span><br><span class="line"><span class="params"></span>) -&gt; StorageClient:</span><br><span class="line">    <span class="keyword">match</span> storage_type:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;s3&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> S3StorageClient()</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;azure&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> AzureCloudStorageClient()</span><br><span class="line">        <span class="keyword">case</span> _ <span class="keyword">as</span> unreachable:</span><br><span class="line">            t.assert_never(unreachable)</span><br></pre></td></tr></table></figure><p>å®é™…ä¸Šæœ€åä¸¤è¡Œéƒ½å¯ä»¥å»æ‰ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹æœ€ç»ˆçš„ä»£ç ï¼š</p><p>æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å±å‘³å¤§å‡ï¼Ÿ</p><p>æœ‰å…³æ‰€æœ‰çš„ Typing ç‰¹æ€§ï¼Œè¯·å‚è€ƒï¼š<a href="https://docs.python.org/3/library/typing.html">typing â€” Support for type hints â€” Python 3.12.0 documentation</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ å¿«Github Pageså›½å†…è®¿é—®é€Ÿåº¦</title>
      <link href="/2023/10/01/%E5%8A%A0%E5%BF%ABGithubPages%E5%9B%BD%E5%86%85%E8%AE%BF%E9%97%AE%E9%80%9F%E5%BA%A6/"/>
      <url>/2023/10/01/%E5%8A%A0%E5%BF%ABGithubPages%E5%9B%BD%E5%86%85%E8%AE%BF%E9%97%AE%E9%80%9F%E5%BA%A6/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ç™½å«–Github Pageså›ºç„¶å¾ˆçˆ½ï¼Œä½†ç”±äºå¢™çš„å­˜åœ¨ï¼Œåœ¨ä¸ä½¿ç”¨é­”æ³•çš„æƒ…å†µä¸‹è®¿é—®æ‰˜ç®¡åœ¨Github Pagesä¸Šçš„ç½‘é¡µå°†ä¼šååˆ†ç¼“æ…¢ã€‚äºæ˜¯æˆ‘ä¸å¾—ä¸åšå‡ºä¸€äº›ä¼˜åŒ–æ¥åŠ å¿«è®¿é—®é€Ÿåº¦ã€‚æœ¬æ–‡é’ˆå¯¹Hexoåšå®¢è€Œå†™ï¼Œæˆ‘ä½¿ç”¨çš„Hexoç‰ˆæœ¬ä¸º4.3.1ï¼Œä¸»é¢˜ä¸ºButterflyã€‚</p><h1 id="ä½¿ç”¨å›¾åºŠ"><a href="#ä½¿ç”¨å›¾åºŠ" class="headerlink" title="ä½¿ç”¨å›¾åºŠ"></a>ä½¿ç”¨å›¾åºŠ</h1><p>å…¶å®Github Pagesçš„åŠ è½½é€Ÿåº¦å°šå¯ï¼Œè€Œæœ€è®©äººä¸èƒ½å¿å—çš„ä¾¿æ˜¯é‚£ä¹Œé¾Ÿèˆ¬çš„å›¾ç‰‡åŠ è½½é€Ÿåº¦ã€‚æƒ³è¦åŠ å¿«å›¾ç‰‡çš„åŠ è½½é€Ÿåº¦ï¼Œæœ€å¥½çš„æ–¹æ³•å°±æ˜¯ä¸å°†å›¾ç‰‡æ‰˜ç®¡åœ¨Github Pagesä¸Šï¼Œè€Œæ˜¯ä½¿ç”¨å›¾åºŠã€‚</p><p>æœ‰å¦‚ä¸‹å…¬å…±å›¾åºŠæ˜¯æˆ‘æ¨èçš„ï¼š</p><ul><li><p><a href="sm.ms">SM.MS</a>  è™½ç„¶æ˜¯å›½å¤–çš„å›¾åºŠï¼Œä½†è®¿é—®é€Ÿåº¦å°šå¯ï¼Œä¹Ÿä¸å­˜åœ¨çªç„¶è·‘è·¯çš„å¯èƒ½</p><ul><li>æ”¯æŒAPIæ“ä½œã€å…è´¹5GBå­˜å‚¨ç©ºé—´ã€å›¾ç‰‡é™åˆ¶5MBã€Telegram Bot</li></ul></li><li><p><a href="https://www.superbed.cn/">èšåˆå›¾åºŠ</a></p><ul><li>æ”¯æŒAPIæ“ä½œã€æ–‡æ¡£è¯¦ç»†ã€ä¸é™å›¾ç‰‡å¤§å°ã€å…è´¹ç”¨æˆ·1000å¼ å›¾ç‰‡é™åˆ¶</li></ul></li></ul><p>æœ‰å¦‚ä¸‹è‡ªå»ºå›¾åºŠæ˜¯æˆ‘æ¨èçš„ï¼š</p><ul><li><p><a href="https://www.lsky.pro/">Lsky Pro - å…°ç©ºå›¾åºŠ</a></p></li><li><p>åœ¨Cloudflareä¸Šæ­å»ºå…è´¹æ— é™ç©ºé—´çš„å›¾åºŠ</p></li></ul><h1 id="å‹ç¼©"><a href="#å‹ç¼©" class="headerlink" title="å‹ç¼©"></a>å‹ç¼©</h1><p>Hexoç”Ÿæˆçš„html&#x2F;js&#x2F;cssæ–‡ä»¶ä¸­æœ‰å¤§é‡æ³¨é‡Šã€ç©ºæ ¼ç­‰æ— ç”¨çš„å†…å®¹ã€‚å¯ä»¥ä½¿ç”¨<a href="https://gulpjs.com/">gulp</a>å¯¹è¿™äº›é™æ€èµ„æºè¿›è¡Œå‹ç¼©ï¼Œä»è€ŒèŠ‚çœæµé‡ã€æé«˜åŠ è½½é€Ÿç‡ã€‚</p><h2 id="å®‰è£…gulp"><a href="#å®‰è£…gulp" class="headerlink" title="å®‰è£…gulp"></a>å®‰è£…gulp</h2><p>åœ¨æœ¬æœºå®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp -g</span><br></pre></td></tr></table></figure><p>åœ¨GitHub Action æˆ–å…¶ä»– CI\CD å¹³å°å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp --save-dev</span><br></pre></td></tr></table></figure><p>å®‰è£…å¿…è¦çš„ä¾èµ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev \</span><br><span class="line">            gulp-minify-css \</span><br><span class="line">            gulp-babel \</span><br><span class="line">            gulp-uglify \</span><br><span class="line">            gulp-htmlmin \</span><br><span class="line">            gulp-htmlclean \</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºé…ç½®æ–‡ä»¶"><a href="#åˆ›å»ºé…ç½®æ–‡ä»¶" class="headerlink" title="åˆ›å»ºé…ç½®æ–‡ä»¶"></a>åˆ›å»ºé…ç½®æ–‡ä»¶</h2><p>åœ¨Hexoåšå®¢çš„æ ¹ç›®å½•ä¸‹ï¼Œæ–°å»º<code>gulpfile.js</code>æ–‡ä»¶ï¼Œå¹¶å°†ä»¥ä¸‹å†…å®¹å¤åˆ¶è¿›å»</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">&quot;gulp&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> minifycss = <span class="built_in">require</span>(<span class="string">&quot;gulp-minify-css&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">&quot;gulp-uglify&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> htmlmin = <span class="built_in">require</span>(<span class="string">&quot;gulp-htmlmin&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> htmlclean = <span class="built_in">require</span>(<span class="string">&quot;gulp-htmlclean&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‹ç¼©cssæ–‡ä»¶</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&quot;minify-css&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .<span class="title function_">src</span>(<span class="string">&quot;./public/**/*.css&quot;</span>)</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">minifycss</span>())</span><br><span class="line">    .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&quot;./public&quot;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‹ç¼©html</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&quot;minify-html&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .<span class="title function_">src</span>(<span class="string">&quot;./public/**/*.html&quot;</span>)</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">htmlclean</span>())</span><br><span class="line">    .<span class="title function_">pipe</span>(</span><br><span class="line">      <span class="title function_">htmlmin</span>(&#123;</span><br><span class="line">        <span class="attr">collapseWhitespace</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">collapseBooleanAttributes</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">removeComments</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">removeEmptyAttributes</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">removeScriptTypeAttributes</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">removeStyleLinkTypeAttributes</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">minifyJS</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">minifyCSS</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">minifyURLs</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">ignoreCustomFragments</span>: [<span class="regexp">/\&#123;\&#123;[\s\S]*?\&#125;\&#125;/</span>],</span><br><span class="line">      &#125;)</span><br><span class="line">    )</span><br><span class="line">    .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&quot;./public&quot;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‹ç¼©jsæ–‡ä»¶</span></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&quot;minify-js&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .<span class="title function_">src</span>([<span class="string">&quot;./public/**/*.js&quot;</span>, <span class="string">&quot;!./public/js/**/*min.js&quot;</span>])</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">uglify</span>())</span><br><span class="line">    .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&quot;./public&quot;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.<span class="title function_">task</span>(</span><br><span class="line">  <span class="string">&quot;default&quot;</span>,</span><br><span class="line">  gulp.<span class="title function_">series</span>(</span><br><span class="line">    gulp.<span class="title function_">parallel</span>(<span class="string">&quot;minify-html&quot;</span>, <span class="string">&quot;minify-css&quot;</span>, <span class="string">&quot;minify-js&quot;</span>)</span><br><span class="line">  )</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><p>åœ¨ä½¿ç”¨<code>hexo g</code>ç”Ÿæˆé™æ€èµ„æºåï¼Œè¿è¡Œ<code>gulp</code>æ¥å¯¹è¿™äº›èµ„æºè¿›è¡Œå‹ç¼©ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> è½¯ä»¶ </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PCA9685èˆµæœºæ¿é©±åŠ¨è¯¦è§£</title>
      <link href="/2023/09/28/PCA9685%E8%88%B5%E6%9C%BA%E9%A9%B1%E5%8A%A8%E6%9D%BF%E8%AF%A6%E8%A7%A3/"/>
      <url>/2023/09/28/PCA9685%E8%88%B5%E6%9C%BA%E9%A9%B1%E5%8A%A8%E6%9D%BF%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>pca9685é©±åŠ¨æ¿æ”¯æŒæ§åˆ¶16è·¯èˆµæœºï¼Œé‡‡ç”¨i2cé€šä¿¡åè®®ã€‚</p><p><img src="https://telegraph-image-6ky.pages.dev/file/12da4aed45a84d714ee04.png"></p><ul><li><p>VCCï¼šPCA9685èŠ¯ç‰‡çš„ç”µæº</p></li><li><p>V+ï¼šèˆµæœºçš„ç”µæº</p><ul><li>èˆµæœºæ•°é‡è¾ƒå°‘æ—¶ç”µæºå¯ä»¥é€šè¿‡V+å¼•è„šè¾“å…¥ï¼Œè¾ƒå¤šæ—¶é€šè¿‡ç»¿è‰²ç”µæºè¾“å…¥ç«¯è¾“å…¥</li></ul></li></ul><h1 id="Arduinoé©±åŠ¨ç¤ºä¾‹"><a href="#Arduinoé©±åŠ¨ç¤ºä¾‹" class="headerlink" title="Arduinoé©±åŠ¨ç¤ºä¾‹"></a>Arduinoé©±åŠ¨ç¤ºä¾‹</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Wire.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Adafruit_PWMServoDriverh&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SERVO_45 187</span></span><br><span class="line"></span><br><span class="line">Adafruit_PWMServoDriver pwm = Adafruit_PWMServoDriver();</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">  pwm.begin();</span><br><span class="line">  pwm.setPWMFreq(<span class="number">50</span>);</span><br><span class="line">  pwm.setPWM(<span class="number">0</span>,<span class="number">0</span>,SERVO_45);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ¬ç¤ºä¾‹ä½¿ç”¨äº†&#96;Adafruit PWM Servo Driver Libraryã€‚</p><p>è¯¥ç¨‹åºå¯ä»¥ä½¿è¿æ¥åœ¨PCA9685èˆµæœºé©±åŠ¨æ¿ä¸Š0å·ä½çš„èˆµæœºè½¬åŠ¨45Â°ã€‚</p><p><code>setPWMFreq()</code>è®¾ç½®äº†IICé€šä¿¡çš„æ›´æ–°é¢‘ç‡ï¼ˆ50HZå¯¹åº”è„‰å†²å‘¨æœŸ20msï¼‰ï¼Œ<code>setPWM()</code>çš„ä¸‰ä¸ªå‚æ•°ä¾æ¬¡ä¸ºèˆµæœºç¼–å·ã€è„‰å†²èµ·å§‹æ—¶é—´ã€è„‰å†²ç»“æŸæ—¶é—´ï¼Œå…¶ä¸­è„‰å†²æ—¶é—´è¦ä»¥å¯„å­˜å™¨çš„å€¼æ¥è¡¨ç¤ºï¼ˆ187å¯¹åº”1.0msï¼‰ã€‚ </p><h1 id="èˆµæœºæ§åˆ¶é€»è¾‘"><a href="#èˆµæœºæ§åˆ¶é€»è¾‘" class="headerlink" title="èˆµæœºæ§åˆ¶é€»è¾‘"></a>èˆµæœºæ§åˆ¶é€»è¾‘</h1><p>ä¸Šè¿°ç¤ºä¾‹ä½¿ç”¨èˆµæœºå‹å·ä¸º<code>SG90</code>ï¼Œè¿åŠ¨èŒƒå›´0Â°-180Â°ï¼Œèˆµæœºçš„æ§åˆ¶å‘¨æœŸä¿¡å·ä¸º20msï¼Œå·¥ä½œè„‰å†²åœ¨0.5ms-2.5msä¹‹é—´ï¼Œèˆµæœºçš„è½¬åŠ¨è§’åº¦ç”±PCA9685çš„12ä½å¯„å­˜å™¨ä¸­çš„å€¼æ¥å†³å®šï¼Œè€Œå¯„å­˜å™¨çš„å€¼ç”±è„‰å†²æ—¶é—´å†³å®šã€‚æ•…å¯ä»¥å¾—åˆ°<code>è„‰å†²æ—¶é—´-å¯„å­˜å™¨å€¼-è½¬åŠ¨è§’åº¦</code>çš„å…³ç³»å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;0.5ms-0Â°&#x27;</span>:<span class="number">0.5</span>*<span class="number">204</span>=<span class="number">102</span></span><br><span class="line"><span class="string">&#x27;1.0ms-45Â°&#x27;</span>:<span class="number">1</span>*<span class="number">204</span>=<span class="number">204</span></span><br><span class="line"><span class="string">&#x27;1.5ms-90Â°&#x27;</span>:<span class="number">1.5</span>*<span class="number">204</span>=<span class="number">306</span></span><br><span class="line"><span class="string">&#x27;2.0ms-135Â°&#x27;</span>:<span class="number">2</span>*<span class="number">204</span>=<span class="number">408</span></span><br><span class="line"><span class="string">&#x27;2.5ms-180Â°&#x27;</span>:<span class="number">2.5</span>*<span class="number">204</span>=<span class="number">510</span></span><br></pre></td></tr></table></figure><p>ç„¶è€Œåœ¨å®é™…ä½¿ç”¨æ—¶ä¼šæœ‰è¯¯å·®å‡ºç°ï¼Œæ•…é™¤äº†0Â°ä¸180Â°çš„æƒ…å†µï¼Œè¦å°†å¯„å­˜å™¨å€¼ä¹˜ä»¥0.915çš„ç³»æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;0.5ms-0Â°&#x27;</span>:<span class="number">0.5</span>*<span class="number">204</span>=<span class="number">102</span></span><br><span class="line"><span class="string">&#x27;1.0ms-45Â°&#x27;</span>:<span class="number">1</span>*<span class="number">204</span>=<span class="number">204</span>*<span class="number">0.915</span>=<span class="number">187</span></span><br><span class="line"><span class="string">&#x27;1.5ms-90Â°&#x27;</span>:<span class="number">1.5</span>*<span class="number">204</span>=<span class="number">306</span>*<span class="number">0.915</span>=<span class="number">280</span></span><br><span class="line"><span class="string">&#x27;2.0ms-135Â°&#x27;</span>:<span class="number">2</span>*<span class="number">204</span>=<span class="number">408</span>*<span class="number">0.915</span>=<span class="number">373</span></span><br><span class="line"><span class="string">&#x27;2.5ms-180Â°&#x27;</span>:<span class="number">2.5</span>*<span class="number">204</span></span><br></pre></td></tr></table></figure><p><img src="https://telegraph-image-6ky.pages.dev/file/5be2ddee20ad6ff4c5377.png" alt="1708329790908"></p>]]></content>
      
      
      
        <tags>
            
            <tag> ç¡¬ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ESP8266-NodeMCUé£Ÿç”¨æŒ‡å—</title>
      <link href="/2023/09/20/ESP8266-NodeMCU%E9%A3%9F%E7%94%A8%E6%8C%87%E5%8D%97/"/>
      <url>/2023/09/20/ESP8266-NodeMCU%E9%A3%9F%E7%94%A8%E6%8C%87%E5%8D%97/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h1><h2 id="WIFIæ¨¡å¼"><a href="#WIFIæ¨¡å¼" class="headerlink" title="WIFIæ¨¡å¼"></a>WIFIæ¨¡å¼</h2><h3 id="æ¥å…¥ç‚¹æ¨¡å¼"><a href="#æ¥å…¥ç‚¹æ¨¡å¼" class="headerlink" title="æ¥å…¥ç‚¹æ¨¡å¼"></a>æ¥å…¥ç‚¹æ¨¡å¼</h3><p>esp8266ä½œä¸ºæ¥å…¥ç‚¹ï¼Œå…¶ä»–è®¾å¤‡é€šè¿‡wifiä¸esp8266è¿æ¥ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æ­¤ç¨‹åºç”¨äºæ¼”ç¤ºå¦‚ä½•å°†NodeMCUä»¥æ¥å…¥ç‚¹æ¨¡å¼å·¥ä½œã€‚é€šè¿‡æ­¤ç¨‹åºï¼Œæ‚¨å¯ä»¥ä½¿ç”¨</span></span><br><span class="line"><span class="comment">ç”µè„‘æˆ–è€…æ‰‹æœºè¿æ¥NodeMCUæ‰€å»ºç«‹WiFiç½‘ç»œã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ESP8266WiFi.h&gt;</span>        <span class="comment">// æœ¬ç¨‹åºä½¿ç”¨ESP8266WiFiåº“</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* ssid = <span class="string">&quot;wifi_name&quot;</span>; </span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* password = <span class="string">&quot;12345678&quot;</span>; <span class="comment">// å¦‚æœå»ºç«‹çš„WiFiä¸è¦å¯†ç ï¼Œåˆ™åœ¨åŒå¼•å·å†…ä¸è¦å¡«å…¥ä»»ä½•ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">  Serial.begin(<span class="number">9600</span>);              <span class="comment">// å¯åŠ¨ä¸²å£é€šè®¯</span></span><br><span class="line"></span><br><span class="line">  WiFi.softAP(ssid, password);     <span class="comment">// æ­¤è¯­å¥æ˜¯é‡ç‚¹ã€‚WiFi.softAPç”¨äºå¯åŠ¨NodeMCUçš„APæ¨¡å¼ã€‚</span></span><br><span class="line"></span><br><span class="line">  Serial.print(<span class="string">&quot;Access Point: &quot;</span>);    <span class="comment">// é€šè¿‡ä¸²å£ç›‘è§†å™¨è¾“å‡ºä¿¡æ¯</span></span><br><span class="line">  Serial.println(ssid);              <span class="comment">// å‘ŠçŸ¥ç”¨æˆ·NodeMCUæ‰€å»ºç«‹çš„WiFiå</span></span><br><span class="line">  Serial.print(<span class="string">&quot;IP address: &quot;</span>);      <span class="comment">// ä»¥åŠNodeMCUçš„IPåœ°å€</span></span><br><span class="line">  Serial.println(WiFi.softAPIP());   <span class="comment">// é€šè¿‡è°ƒç”¨WiFi.softAPIP()å¯ä»¥å¾—åˆ°NodeMCUçš„IPåœ°å€</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ— çº¿ç»ˆç«¯æ¨¡å¼"><a href="#æ— çº¿ç»ˆç«¯æ¨¡å¼" class="headerlink" title="æ— çº¿ç»ˆç«¯æ¨¡å¼"></a>æ— çº¿ç»ˆç«¯æ¨¡å¼</h3><p>esp8266ä¸è·¯ç”±å™¨è¿æ¥ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æ­¤ç¨‹åºç”¨äºæ¼”ç¤ºå¦‚ä½•å°†NodeMcuä»¥æ¥å…¥ç‚¹æ¨¡å¼å·¥ä½œ</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ESP8266WiFi.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* ssid = <span class="string">&quot;wifi_name&quot;</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* password = <span class="string">&quot;pswd&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span>&#123;</span><br><span class="line">    Serial.begin(<span class="number">9600</span>)</span><br><span class="line"></span><br><span class="line">    WiFi.begin(ssid, password);                  <span class="comment">// å¯åŠ¨ç½‘ç»œè¿æ¥</span></span><br><span class="line">    Serial.print(<span class="string">&quot;Connecting to &quot;</span>);              </span><br><span class="line">    Serial.print(ssid); </span><br><span class="line">    Serial.println(<span class="string">&quot; ...&quot;</span>);  </span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>;                                   <span class="comment">// è¿™ä¸€æ®µç¨‹åºè¯­å¥ç”¨äºæ£€æŸ¥WiFiæ˜¯å¦è¿æ¥æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">while</span> (WiFi.status() != WL_CONNECTED) &#123;      </span><br><span class="line">        delay(<span class="number">1000</span>);                                                     </span><br><span class="line">        Serial.print(i++); Serial.print(<span class="string">&#x27; &#x27;</span>);     </span><br><span class="line">    &#125;                                            </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç½‘ç»œæœåŠ¡å™¨"><a href="#ç½‘ç»œæœåŠ¡å™¨" class="headerlink" title="ç½‘ç»œæœåŠ¡å™¨"></a>ç½‘ç»œæœåŠ¡å™¨</h1><h2 id="ç®€å•çš„ç½‘ç»œæœåŠ¡å™¨"><a href="#ç®€å•çš„ç½‘ç»œæœåŠ¡å™¨" class="headerlink" title="ç®€å•çš„ç½‘ç»œæœåŠ¡å™¨"></a>ç®€å•çš„ç½‘ç»œæœåŠ¡å™¨</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> ä½¿ç”¨NodeMCUå»ºç«‹åŸºæœ¬æœåŠ¡å™¨ã€‚ç”¨æˆ·å¯é€šè¿‡æµè§ˆå™¨ä½¿ç”¨8266çš„IPåœ°å€è®¿é—®8266æ‰€å»ºç«‹çš„åŸºæœ¬ç½‘é¡µ</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ESP8266WiFi.h&gt;</span>       </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ESP8266WiFiMulti.h&gt;</span>   </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ESP8266WebServer.h&gt;</span>   </span></span><br><span class="line"></span><br><span class="line">ESP8266WebServer <span class="title function_">esp8266_server</span><span class="params">(<span class="number">80</span>)</span>; <span class="comment">// æ‹¬å·ä¸­çš„æ•°å­—æ˜¯ç½‘è·¯æœåŠ¡å™¨å“åº”httpè¯·æ±‚çš„ç«¯å£å·</span></span><br><span class="line">                                     <span class="comment">// ç½‘ç»œæœåŠ¡å™¨æ ‡å‡†httpç«¯å£å·ä¸º80ï¼Œå› æ­¤è¿™é‡Œä½¿ç”¨80ä¸ºç«¯å£å·</span></span><br><span class="line"><span class="type">const</span> <span class="type">char</span> *ssid = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span> *password = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line">  Serial.begin(<span class="number">9600</span>);</span><br><span class="line"></span><br><span class="line">  pinMode(LED_BUILTIN,OUTPUT); <span class="comment">//æŠŠå†…ç½®ledå¼•è„šè®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼</span></span><br><span class="line"></span><br><span class="line">  WiFi.begin(ssid, password);</span><br><span class="line"></span><br><span class="line">  <span class="type">int</span> i = <span class="number">0</span>;                                 </span><br><span class="line">  <span class="keyword">while</span> (WiFi.status() != WL_CONNECTED) &#123;  </span><br><span class="line">    delay(<span class="number">1000</span>);                             </span><br><span class="line">    Serial.print(i++); Serial.print(<span class="string">&#x27; &#x27;</span>);    </span><br><span class="line">  &#125;                                          </span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯åŠ¨ç½‘ç»œæœåŠ¡åŠŸèƒ½  </span></span><br><span class="line">  esp8266_server.begin();                   </span><br><span class="line">  esp8266_server.on(<span class="string">&quot;/&quot;</span>, handleRoot);       <span class="comment">// å°†é¡µé¢&quot;/&quot;äº¤ç»™handleRoot()å¤„ç†</span></span><br><span class="line">  esp8266_server.on(<span class="string">&quot;/LED&quot;</span>,handleLED);</span><br><span class="line">  esp8266_server.onNotFound(handleNotFound);  <span class="comment">// å°†404é¡µé¢äº¤ç»™handleNotFound()å¤„ç†      </span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// handleClientæ¯æ¬¡è¢«è°ƒç”¨æ—¶ï¼ŒNodeMCUéƒ½ä¼šæ£€æŸ¥ä¸€ä¸‹æ˜¯å¦æ¥æ”¶åˆ°httpè¯·æ±‚ã€‚</span></span><br><span class="line">  esp8266_server.handleClient();     <span class="comment">// å¤„ç†httpæœåŠ¡å™¨è®¿é—®</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">handleRoot</span><span class="params">()</span> &#123;   <span class="comment">//å¤„ç†ç½‘ç«™æ ¹ç›®å½•â€œ/â€çš„è®¿é—®è¯·æ±‚ </span></span><br><span class="line">  esp8266_server.send(<span class="number">200</span>, <span class="string">&quot;text/html&quot;</span>, <span class="string">&quot;&lt;form action=\&quot;/LED\&quot; method=\&quot;POST\&quot;&gt;&lt;input type=\&quot;submit\&quot; value=\&quot;Toggle LED\&quot;&gt;&lt;/form&gt;&quot;</span>);   <span class="comment">// çŠ¶æ€è¡Œã€å“åº”å¤´ã€å“åº”ä½“</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">handleLED</span><span class="params">()</span>&#123;</span><br><span class="line">  digitalWrite(LED_BUILTIN,!digitalRead(LED_BUILTIN));</span><br><span class="line">  esp8266_server.sendHeader(<span class="string">&quot;Location&quot;</span>,<span class="string">&quot;/&quot;</span>); <span class="comment">// è¿”å›&quot;/&quot;</span></span><br><span class="line">  esp8266_server.send(<span class="number">303</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®å¤„ç†404æƒ…å†µçš„å‡½æ•°&#x27;handleNotFound&#x27;</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">handleNotFound</span><span class="params">()</span>&#123;                                        </span><br><span class="line">  esp8266_server.send(<span class="number">404</span>, <span class="string">&quot;text/plain&quot;</span>, <span class="string">&quot;404: Not found&quot;</span>);   <span class="comment">// å½“æµè§ˆå™¨è¯·æ±‚çš„ç½‘ç»œèµ„æºæ— æ³•åœ¨æœåŠ¡å™¨æ‰¾åˆ°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœ<code>handleClient</code>å‡½æ•°é•¿æ—¶é—´å¾—ä¸åˆ°è°ƒç”¨ï¼ŒNodeMCUçš„ç½‘ç»œæœåŠ¡ä¼šå˜å¾—å¾ˆä¸ç¨³å®šã€‚å› æ­¤åœ¨ä½¿ç”¨NodeMCUæ‰§è¡Œç½‘ç»œæœåŠ¡åŠŸèƒ½çš„æ—¶å€™ï¼Œä¸€å®šè¦ç¡®ä¿<code>handleClient</code>å‡½æ•°ç»å¸¸å¾—ä»¥è°ƒç”¨ã€‚</p><h1 id="é€šä¿¡"><a href="#é€šä¿¡" class="headerlink" title="é€šä¿¡"></a>é€šä¿¡</h1><h2 id="MQTTé€šä¿¡"><a href="#MQTTé€šä¿¡" class="headerlink" title="MQTTé€šä¿¡"></a>MQTTé€šä¿¡</h2><p>MQTTé€šä¿¡ä¸HTTPé€šä¿¡éƒ½åŸºäºTCP&#x2F;IPåè®®ï¼Œç‰©è”ç½‘åº”ç”¨ä¸­å¤šä½¿ç”¨MQTTåè®®ï¼Œå®ƒæœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š</p><ul><li><p>MQTTæ˜¯ä¸€ç§è½»é‡çº§åè®®ï¼Œå› æ­¤å¯ä»¥åœ¨ç½‘ç»œå¸¦å®½å—é™çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚</p></li><li><p>MQTTä½¿ç”¨å‘å¸ƒ&#x2F;è®¢é˜…æ¨¡å¼ï¼Œè¿™æ„å‘³ç€å®¢æˆ·ç«¯åªéœ€è¦è®¢é˜…æ„Ÿå…´è¶£çš„ä¸»é¢˜å³å¯æ¥æ”¶æ¶ˆæ¯ã€‚è¿™ç§æ¨¡å¼å¯ä»¥å‡å°‘ç½‘ç»œæµé‡å’ŒæœåŠ¡å™¨è´Ÿè½½ã€‚</p></li><li><p>MQTTæ”¯æŒQoSï¼ˆQuality of Serviceï¼‰ç­‰çº§ï¼Œå¯ä»¥ç¡®ä¿æ¶ˆæ¯ä¼ é€’çš„å¯é æ€§å’Œä¸€è‡´æ€§ã€‚</p></li><li><p>MQTTæ”¯æŒç¦»çº¿æ¶ˆæ¯ç¼“å­˜å’Œæ¶ˆæ¯ä¿ç•™åŠŸèƒ½ï¼Œè¿™æ„å‘³ç€å®¢æˆ·ç«¯å¯ä»¥åœ¨é‡æ–°è¿æ¥åˆ°æœåŠ¡å™¨æ—¶æ¥æ”¶åˆ°ä¹‹å‰æœªæ¥æ”¶åˆ°çš„æ¶ˆæ¯ã€‚</p></li></ul><h2 id="HTTPé€šä¿¡"><a href="#HTTPé€šä¿¡" class="headerlink" title="HTTPé€šä¿¡"></a>HTTPé€šä¿¡</h2><h3 id="HTTPåè®®"><a href="#HTTPåè®®" class="headerlink" title="HTTPåè®®"></a>HTTPåè®®</h3><h4 id="è¯·æ±‚"><a href="#è¯·æ±‚" class="headerlink" title="è¯·æ±‚"></a>è¯·æ±‚</h4><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">è¯·æ±‚è¡Œ:</span><br><span class="line">GET / HTTP/1.1 # &#x27;GET&#x27;:è¯»å– &#x27;/&#x27;:ç½‘ç«™é¦–é¡µ &#x27;HTTP/1.1&#x27;:åè®®ç‰ˆæœ¬</span><br><span class="line"></span><br><span class="line">è¯·æ±‚å¤´:</span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>www.baidu.com</span><br><span class="line"><span class="attribute">User-Agent</span><span class="punctuation">: </span>Mozilla/5.0</span><br><span class="line"><span class="attribute">Accept</span><span class="punctuation">: </span>text/html</span><br><span class="line"><span class="attribute">Accept-Launguage</span><span class="punctuation">: </span>zh-CN,zh;q=0.8</span><br><span class="line"><span class="attribute">Accept-Ecoding</span><span class="punctuation">: </span>gzip,deflate,sdch</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>Keep-Alive</span><br></pre></td></tr></table></figure><h4 id="å“åº”"><a href="#å“åº”" class="headerlink" title="å“åº”"></a>å“åº”</h4><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">çŠ¶æ€è¡Œ:</span><br><span class="line"><span class="meta">HTTP/1.1</span> <span class="number">200</span> OK</span><br><span class="line"></span><br><span class="line"><span class="language-makefile"><span class="section">å“åº”å¤´:</span></span></span><br><span class="line"><span class="language-makefile"><span class="section">Date: Fri,22 May 2009 06:07:21 GMT</span></span></span><br><span class="line"><span class="language-makefile"><span class="section">Content-Type: text/html;charset=UTF-8</span></span></span><br><span class="line"><span class="language-makefile"></span></span><br><span class="line"><span class="language-makefile"><span class="section">å“åº”ä½“:</span></span></span><br><span class="line"><span class="language-makefile">&lt;html&gt;...&lt;html&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨WiFiClientåº“å®ç°HTTPé€šä¿¡"><a href="#ä½¿ç”¨WiFiClientåº“å®ç°HTTPé€šä¿¡" class="headerlink" title="ä½¿ç”¨WiFiClientåº“å®ç°HTTPé€šä¿¡"></a>ä½¿ç”¨WiFiClientåº“å®ç°HTTPé€šä¿¡</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">wifiClientRequest</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="comment">// å»ºç«‹WiFiå®¢æˆ·ç«¯å¯¹è±¡ï¼Œå¯¹è±¡åç§°client</span></span><br><span class="line">  WiFiClient client;    </span><br><span class="line"></span><br><span class="line">  <span class="comment">// å»ºç«‹å­—ç¬¦ä¸²ï¼Œç”¨äºHTTPè¯·æ±‚</span></span><br><span class="line">  String httpRequest =  String(<span class="string">&quot;GET /&quot;</span>) + <span class="string">&quot; HTTP/1.1\r\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;Host: &quot;</span> + host + <span class="string">&quot;\r\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;Connection: close\r\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;\r\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€šè¿‡ä¸²å£è¾“å‡ºè¿æ¥æœåŠ¡å™¨åç§°ä»¥ä¾¿æŸ¥é˜…è¿æ¥æœåŠ¡å™¨çš„ç½‘å€                      </span></span><br><span class="line">  Serial.print(<span class="string">&quot;Connecting to &quot;</span>); </span><br><span class="line">  Serial.print(host); </span><br><span class="line"></span><br><span class="line">  <span class="comment">// httpæœåŠ¡å™¨çš„é»˜è®¤ç«¯å£å·ä¸º80</span></span><br><span class="line">  <span class="keyword">if</span> (client.connect(host, httpPort))&#123; </span><br><span class="line">    Serial.println(<span class="string">&quot; Success!&quot;</span>);        </span><br><span class="line"></span><br><span class="line">    client.print(httpRequest);          <span class="comment">// å‘æœåŠ¡å™¨å‘é€HTTPè¯·æ±‚   </span></span><br><span class="line"></span><br><span class="line">    Serial.println(<span class="string">&quot;Web Server Response:&quot;</span>);        </span><br><span class="line">    <span class="keyword">while</span> (client.connected() || client.available())&#123; </span><br><span class="line">      <span class="keyword">if</span> (client.available())&#123;</span><br><span class="line">        String line = client.readStringUntil(<span class="string">&#x27;\n&#x27;</span>); <span class="comment">// è¯»å–æœåŠ¡å™¨å‘é€çš„ä¿¡æ¯</span></span><br><span class="line">        Serial.println(line);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    client.stop();                      <span class="comment">// æ–­å¼€ä¸æœåŠ¡å™¨çš„è¿æ¥</span></span><br><span class="line"></span><br><span class="line">  &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">    Serial.println(<span class="string">&quot; connection failed!&quot;</span>);</span><br><span class="line">    client.stop();</span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id=""><a href="#" class="headerlink" title=""></a></h2><h1 id="é—ªå­˜æ–‡ä»¶ç³»ç»Ÿ"><a href="#é—ªå­˜æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="é—ªå­˜æ–‡ä»¶ç³»ç»Ÿ"></a>é—ªå­˜æ–‡ä»¶ç³»ç»Ÿ</h1><p>ESP8266å…·æœ‰4Mbçš„é—ªå­˜ï¼ˆSPIFFSï¼‰ï¼Œé™¤äº†èƒ½å­˜æ”¾ç¨‹åºï¼Œè¿˜èƒ½å­˜æ”¾å„ç§èµ„æºæ–‡ä»¶ï¼Œå¦‚htmlæ–‡ä»¶ã€ç³»ç»Ÿé…ç½®æ–‡ä»¶ç­‰ã€‚</p><h2 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h2><h3 id="å†™å…¥-åˆ é™¤"><a href="#å†™å…¥-åˆ é™¤" class="headerlink" title="å†™å…¥&#x2F;åˆ é™¤"></a>å†™å…¥&#x2F;åˆ é™¤</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;FS.h&gt;</span>  </span></span><br><span class="line"></span><br><span class="line">String file_name = <span class="string">&quot;/taichi-maker/notes.txt&quot;</span>; <span class="comment">//è¢«è¯»å–çš„æ–‡ä»¶ä½ç½®å’Œåç§°</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">  Serial.begin(<span class="number">9600</span>);</span><br><span class="line"></span><br><span class="line">  SPIFFS.format();    <span class="comment">// æ ¼å¼åŒ–SPIFFSï¼Œæ¸…é™¤é—ªå­˜ä¸­çš„æ‰€æœ‰å†…å®¹</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(SPIFFS.begin())&#123; <span class="comment">// å¯åŠ¨SPIFFS</span></span><br><span class="line">    Serial.println(<span class="string">&quot;SPIFFS Started.&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    Serial.println(<span class="string">&quot;SPIFFS Failed to Start.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å†™å…¥ä¿¡æ¯</span></span><br><span class="line">  File dataFile = SPIFFS.open(file_name, <span class="string">&quot;w&quot;</span>);<span class="comment">// å»ºç«‹Fileå¯¹è±¡ç”¨äºå‘SPIFFSä¸­çš„fileå¯¹è±¡ï¼ˆå³/notes.txtï¼‰å†™å…¥ä¿¡æ¯ &quot;w&quot;å³write</span></span><br><span class="line">  dataFile.println(<span class="string">&quot;Hello IOT World.&quot;</span>);       <span class="comment">// å‘dataFileå†™å…¥å­—ç¬¦ä¸²ä¿¡æ¯       </span></span><br><span class="line">  dataFile.close();                           <span class="comment">// å®Œæˆæ–‡ä»¶å†™å…¥åå…³é—­æ–‡ä»¶</span></span><br><span class="line">  <span class="comment">// åˆ é™¤ä¿¡æ¯</span></span><br><span class="line">  <span class="keyword">if</span> (SPIFFS.remove(file_name))&#123;</span><br><span class="line">    Serial.print(file_name);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    Serial.print(file_name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¯»å–"><a href="#è¯»å–" class="headerlink" title="è¯»å–"></a>è¯»å–</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ£€æŸ¥é—ªå­˜ä¸­æ˜¯å¦æœ‰file_name</span></span><br><span class="line"><span class="keyword">if</span> (SPIFFS.exists(file_name))&#123;</span><br><span class="line">  Serial.print(file_name);</span><br><span class="line">  Serial.println(<span class="string">&quot; FOUND.&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  Serial.print(file_name);</span><br><span class="line">  Serial.print(<span class="string">&quot; NOT FOUND.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">File dataFile = SPIFFS.open(File_name,<span class="string">&quot;r&quot;</span>);</span><br><span class="line"><span class="comment">// è¯»å–æ–‡ä»¶å†…å®¹å¹¶è¾“å‡ºåˆ°ä¸²å£</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;dataFile.size(); i++)&#123;</span><br><span class="line">  Serial.print((<span class="type">char</span>)dataFile.read());       </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dataFile.close();</span><br><span class="line">Dir dir = SPIFFS.openDir(folder_name); <span class="comment">// è¯»å–ç›®å½•å¯¹è±¡</span></span><br><span class="line"><span class="keyword">while</span> (dir.next())&#123;</span><br><span class="line">  Serial.print(dir.fileName());</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="é—ªå­˜ä¿¡æ¯"><a href="#é—ªå­˜ä¿¡æ¯" class="headerlink" title="é—ªå­˜ä¿¡æ¯"></a>é—ªå­˜ä¿¡æ¯</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é—ªå­˜æ–‡ä»¶ç³»ç»Ÿä¿¡æ¯</span></span><br><span class="line">  SPIFFS.info(fs_info);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯ç”¨ç©ºé—´æ€»å’Œï¼ˆå•ä½ï¼šå­—èŠ‚ï¼‰</span></span><br><span class="line">  Serial.print(<span class="string">&quot;totalBytes: &quot;</span>);     </span><br><span class="line">  Serial.print(fs_info.totalBytes); </span><br><span class="line">  Serial.println(<span class="string">&quot; Bytes&quot;</span>); </span><br><span class="line"></span><br><span class="line">  <span class="comment">// å·²ç”¨ç©ºé—´ï¼ˆå•ä½ï¼šå­—èŠ‚ï¼‰</span></span><br><span class="line">  Serial.print(<span class="string">&quot;usedBytes: &quot;</span>); </span><br><span class="line">  Serial.print(fs_info.usedBytes);</span><br><span class="line">  Serial.println(<span class="string">&quot; Bytes&quot;</span>); </span><br><span class="line"></span><br><span class="line">  <span class="comment">// æœ€å¤§æ–‡ä»¶åå­—ç¬¦é™åˆ¶ï¼ˆå«è·¯å¾„å’Œ&#x27;\0&#x27;ï¼‰</span></span><br><span class="line">  Serial.print(<span class="string">&quot;maxPathLength: &quot;</span>); </span><br><span class="line">  Serial.println(fs_info.maxPathLength);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æœ€å¤šå…è®¸æ‰“å¼€æ–‡ä»¶æ•°é‡</span></span><br><span class="line">  Serial.print(<span class="string">&quot;maxOpenFiles: &quot;</span>); </span><br><span class="line">  Serial.println(fs_info.maxOpenFiles);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å­˜å‚¨å—å¤§å°</span></span><br><span class="line">  Serial.print(<span class="string">&quot;blockSize: &quot;</span>); </span><br><span class="line">  Serial.println(fs_info.blockSize);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å­˜å‚¨é¡µå¤§å°</span></span><br><span class="line">  Serial.print(<span class="string">&quot;pageSize: &quot;</span>);</span><br><span class="line">  Serial.println(fs_info.pageSize);</span><br></pre></td></tr></table></figure><h1 id="åº”ç”¨æŠ€å·§"><a href="#åº”ç”¨æŠ€å·§" class="headerlink" title="åº”ç”¨æŠ€å·§"></a>åº”ç”¨æŠ€å·§</h1><h2 id="å¤šä»»åŠ¡ä¹‹Tickeråº“"><a href="#å¤šä»»åŠ¡ä¹‹Tickeråº“" class="headerlink" title="å¤šä»»åŠ¡ä¹‹Tickeråº“"></a>å¤šä»»åŠ¡ä¹‹Tickeråº“</h2><p>ESP8266åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œåªèƒ½ä¸€æ¡çº¿å¼çš„ä¾æ¬¡æ‰§è¡Œä»»åŠ¡ã€‚ä½†æ˜¯æˆ‘ä»¬åœ¨å¼€å‘ç‰©è”ç½‘é¡¹ç›®æ—¶ï¼Œå¯èƒ½éœ€è¦ESP8266åœ¨æ‰§è¡ŒæŸä¸€ä»»åŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜èƒ½å¤„ç†å…¶å®ƒä»»åŠ¡ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬ä½¿ç”¨ESP8266æ¥æ§åˆ¶ç”µæœºè¿è¡Œçš„åŒæ—¶ï¼Œè¿˜éœ€è¦å®šæ—¶æ£€æŸ¥æŸä¸€ä¸ªå¼•è„šä¸Šè¿æ¥æŒ‰é’®æœ‰æ²¡æœ‰è¢«ç”¨æˆ·æŒ‰ä¸‹ã€‚</p><p>ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šçº¿ç¨‹ï¼Œæˆ‘ä½¿ç”¨çš„åº“æ˜¯Tickerã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Tikcer.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">Ticker ticker;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span>&#123;</span><br><span class="line">    ticker.attach(interval, func, parameter);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">func</span><span class="params">(<span class="type">int</span> parameter)</span>&#123;&#125;</span><br></pre></td></tr></table></figure><p><code>Ticker.attach()</code>ä¼šä»¥é—´éš”æ—¶é—´<code>interval</code>æ‰§è¡Œå®šæ—¶ä»»åŠ¡<code>func(parameter)</code>ï¼Œæ³¨æ„ï¼Œ<code>Tikcer.attach()</code>ç»‘å®šçš„å‡½æ•°åªèƒ½æœ‰æœ€å¤šä¸€ä¸ªå‚æ•°ã€‚ä¸€ä¸ªTikcerå¯¹è±¡ä»…èƒ½ç»‘å®šä¸€ä¸ªå‡½æ•°ã€‚å‚æ•°ç±»å‹åªèƒ½æ˜¯char&#x2F;short&#x2F;int&#x2F;float&#x2F;void*&#x2F;char*</p><p><code>Ticker.detach()</code>ä¼šåœæ­¢å®šæ—¶ä»»åŠ¡ã€‚</p><p>å¦å¤–ï¼Œåœ¨ä½¿ç”¨<code>Ticker.attach()</code>ç»‘å®šçš„å‡½æ•°æ‰§è¡Œçš„æ—¶é—´å¿…é¡»å¾ˆçŸ­ï¼Œå¦åˆ™ä¼šäº§ç”Ÿä¸å¯é¢„æ–™çš„é—®é¢˜ã€‚å¯¹äºæ‰§è¡Œæ—¶é—´è¾ƒé•¿çš„æ“ä½œï¼Œå¦‚httpè¯·æ±‚ï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹æ–¹æ³•ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Tikcer.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">Ticker ticker;</span><br><span class="line"><span class="type">int</span> count;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span>&#123;</span><br><span class="line">    count = <span class="number">0</span>;</span><br><span class="line">    ticker.attach(interval, count_func);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">count_func</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="built_in">cout</span>++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">func</span><span class="params">(<span class="type">int</span> parameter)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(cont&gt;=interval)&#123;</span><br><span class="line">        httprequest()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> ç¡¬ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
